import{d as A,r as y,q as S,c as d,g as t,e as F,n as p,F as C,f as x,a as v,w as f,u as g,b as E,p as j,i as q,o as n,j as D,T as w,h as B,s as G,_ as z}from"./index-0d1ede7e.js";import{m as u}from"./mock-22270600.js";const J=()=>{const h=[];for(let e=0;e<u.Random.integer(3,5);e++)h.push({isCheck:!1,shopName:`${u.mock("@ctitle")}自营店`,goodsList:(()=>{const r=[];for(let m=0;m<u.Random.integer(2,5);m++)r.push({isCheck:!1,goodsImg:u.Random.image("100x100",u.mock("@color"),u.mock("color"),`商品${e}${m}`),goodsName:u.mock("@ctitle"),goodsSpec:["包邮","麻辣"],price:u.Random.float(50,100,2,2),maxNum:u.Random.integer(20,50),num:u.Random.integer(1,10)});return r})()});return h},T=h=>(j("data-v-cdb94816"),h=h(),q(),h),K={class:"goods-cart"},M={class:"cart-top flex-between"},O={class:"goods-list"},P={key:0,class:"goods-stop"},Q={class:"goods-stop-title"},W=["onClick"],X={class:"goodsItem-cont flex-between"},Y=["src"],Z={class:"goodsItem-cont-more"},I={class:"goodsItem-cont-name"},ee={class:"goodsItem-cont-more-bottom flex-between"},se={class:"goods-spec"},oe=T(()=>t("div",{style:{height:"50px"}},null,-1)),te={class:"goods-cart-bottom flex-between"},ae=T(()=>t("div",{class:"check-all-text"},"全选",-1)),ce={class:"price"},le=A({__name:"index",setup(h){const e=y(J()),r=y(!1),m=S(()=>{let a=0;return g(e).forEach(o=>{o.goodsList.forEach(()=>{a++})}),a}),R=()=>{g(e).forEach((a,o)=>{a.isCheck?e.value[o].goodsList.forEach(s=>{s.isCheck=!0}):e.value[o].goodsList.forEach(s=>{s.isCheck=!1})})},U=()=>{g(e).forEach((a,o)=>{let s=0;const{goodsList:c}=a;c.forEach(k=>{k.isCheck&&s++}),s===c.length&&s!==0?e.value[o].isCheck=!0:e.value[o].isCheck=!1})},$=a=>{a?g(e).forEach((o,s)=>{e.value[s].isCheck=!0,e.value[s].goodsList.forEach(c=>{c.isCheck=!0})}):g(e).forEach((o,s)=>{e.value[s].isCheck=!1,e.value[s].goodsList.forEach(c=>{c.isCheck=a})})},b=S(()=>{let a=!1,o=0,s=0;return e.value.forEach(c=>{c.isCheck&&o++;const{goodsList:k}=c;k.forEach(l=>{l.isCheck&&(s+=l.price*l.num)})}),o===e.value.length&&(a=!0),{isCheckAll:a,price:s.toFixed(2)}}),H=(a,o)=>{e.value[a].goodsList.splice(o,1)};return(a,o)=>{const s=E("HCheckbox"),c=E("h-icon"),k=E("HStepper");return n(),d("div",K,[t("div",M,[t("div",null,[F(" 购物车 "),t("span",null,"("+p(m.value)+")",1)]),r.value?(n(),d("span",{key:1,onClick:o[1]||(o[1]=l=>r.value=!r.value)},"退出管理")):(n(),d("span",{key:0,onClick:o[0]||(o[0]=l=>r.value=!r.value)},"管理"))]),t("div",O,[(n(!0),d(C,null,x(e.value,(l,L)=>(n(),D(w,{key:L,name:"list"},{default:f(()=>[l.goodsList.length?(n(),d("div",P,[t("div",Q,[v(s,{value:l.isCheck,"onUpdate:value":i=>l.isCheck=i,theme:"pink",onCallBack:R},{default:f(()=>[t("div",null,p(l.shopName),1)]),_:2},1032,["value","onUpdate:value"])]),v(G,{name:"list"},{default:f(()=>[(n(!0),d(C,null,x(l.goodsList,(i,N)=>(n(),d("div",{class:"goods-item flex-between",key:N},[v(w,null,{default:f(()=>[r.value?(n(),d("div",{key:0,class:"goods-item-delete",onClick:_=>H(L,N)},[v(c,{name:"icon-brush"})],8,W)):B("",!0)]),_:2},1024),v(s,{value:i.isCheck,"onUpdate:value":_=>i.isCheck=_,theme:"pink",onCallBack:U},null,8,["value","onUpdate:value"]),t("div",X,[t("img",{src:i.goodsImg},null,8,Y),t("div",Z,[t("div",I,p(i.goodsName),1),t("div",ee,[t("div",se,[t("div",null,[(n(!0),d(C,null,x(i.goodsSpec,(_,V)=>(n(),d("span",{key:V},p(_),1))),128))]),t("div",null,"￥"+p(i.price),1)]),v(k,{value:i.num,"onUpdate:value":_=>i.num=_,range:[1,10]},null,8,["value","onUpdate:value"])])])])]))),128))]),_:2},1024)])):B("",!0)]),_:2},1024))),128))]),oe,t("div",te,[v(s,{value:b.value.isCheckAll,theme:"pink",onCallBack:$},{default:f(()=>[ae]),_:1},8,["value"]),t("div",ce,"￥"+p(b.value.price),1)])])}}});const de=z(le,[["__scopeId","data-v-cdb94816"]]);export{de as default};

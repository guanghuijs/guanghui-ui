import{d as V,r as y,h as w,c as r,g as t,e as A,t as m,F as C,i as x,a as v,w as p,u as f,b as E,o as n,f as F,T as B,j as T,k as j,_ as D}from"./index-4a9eefc9.js";import{m as u}from"./mock-22270600.js";import"@ghui/components";const G=()=>{const g=[];for(let s=0;s<u.Random.integer(3,5);s++)g.push({isCheck:!1,shopName:`${u.mock("@ctitle")}自营店`,goodsList:(()=>{const d=[];for(let k=0;k<u.Random.integer(2,5);k++)d.push({isCheck:!1,goodsImg:u.Random.image("100x100",u.mock("@color"),u.mock("color"),`商品${s}${k}`),goodsName:u.mock("@ctitle"),goodsSpec:["包邮","麻辣"],price:u.Random.float(50,100,2,2),maxNum:u.Random.integer(20,50),num:u.Random.integer(1,10)});return d})()});return g},q={class:"goods-cart"},z={class:"cart-top flex-between"},J={class:"goods-list"},K={key:0,class:"goods-stop"},M={class:"goods-stop-title"},O=["onClick"],P={class:"goodsItem-cont flex-between"},Q=["src"],W={class:"goodsItem-cont-more"},X={class:"goodsItem-cont-name"},Y={class:"goodsItem-cont-more-bottom flex-between"},Z={class:"goods-spec"},I={class:"goods-cart-bottom flex-between"},ee={class:"price"},se=V({__name:"index",setup(g){const s=y(G()),d=y(!1),k=w(()=>{let l=0;return f(s).forEach(e=>{e.goodsList.forEach(()=>{l++})}),l}),R=()=>{f(s).forEach((l,e)=>{l.isCheck?s.value[e].goodsList.forEach(o=>{o.isCheck=!0}):s.value[e].goodsList.forEach(o=>{o.isCheck=!1})})},S=()=>{f(s).forEach((l,e)=>{let o=0;const{goodsList:a}=l;a.forEach(_=>{_.isCheck&&o++}),o===a.length&&o!==0?s.value[e].isCheck=!0:s.value[e].isCheck=!1})},U=l=>{l?f(s).forEach((e,o)=>{s.value[o].isCheck=!0,s.value[o].goodsList.forEach(a=>{a.isCheck=!0})}):f(s).forEach((e,o)=>{s.value[o].isCheck=!1,s.value[o].goodsList.forEach(a=>{a.isCheck=l})})},L=w(()=>{let l=!1,e=0,o=0;return s.value.forEach(a=>{a.isCheck&&e++;const{goodsList:_}=a;_.forEach(c=>{c.isCheck&&(o+=c.price*c.num)})}),e===s.value.length&&(l=!0),{isCheckAll:l,price:o.toFixed(2)}}),$=(l,e)=>{s.value[l].goodsList.splice(e,1)};return(l,e)=>{const o=E("HCheckbox"),a=E("h-icon"),_=E("HStepper");return n(),r("div",q,[t("div",z,[t("div",null,[e[2]||(e[2]=A(" 购物车 ")),t("span",null,"("+m(k.value)+")",1)]),d.value?(n(),r("span",{key:1,onClick:e[1]||(e[1]=c=>d.value=!d.value)},"退出管理")):(n(),r("span",{key:0,onClick:e[0]||(e[0]=c=>d.value=!d.value)},"管理"))]),t("div",J,[(n(!0),r(C,null,x(s.value,(c,b)=>(n(),F(B,{key:b,name:"list"},{default:p(()=>[c.goodsList.length?(n(),r("div",K,[t("div",M,[v(o,{value:c.isCheck,"onUpdate:value":i=>c.isCheck=i,theme:"pink",onCallBack:R},{default:p(()=>[t("div",null,m(c.shopName),1)]),_:2},1032,["value","onUpdate:value"])]),v(j,{name:"list"},{default:p(()=>[(n(!0),r(C,null,x(c.goodsList,(i,N)=>(n(),r("div",{class:"goods-item flex-between",key:N},[v(B,null,{default:p(()=>[d.value?(n(),r("div",{key:0,class:"goods-item-delete",onClick:h=>$(b,N)},[v(a,{name:"icon-brush"})],8,O)):T("",!0)]),_:2},1024),v(o,{value:i.isCheck,"onUpdate:value":h=>i.isCheck=h,theme:"pink",onCallBack:S},null,8,["value","onUpdate:value"]),t("div",P,[t("img",{src:i.goodsImg},null,8,Q),t("div",W,[t("div",X,m(i.goodsName),1),t("div",Y,[t("div",Z,[t("div",null,[(n(!0),r(C,null,x(i.goodsSpec,(h,H)=>(n(),r("span",{key:H},m(h),1))),128))]),t("div",null,"￥"+m(i.price),1)]),v(_,{value:i.num,"onUpdate:value":h=>i.num=h,range:[1,10]},null,8,["value","onUpdate:value"])])])])]))),128))]),_:2},1024)])):T("",!0)]),_:2},1024))),128))]),e[4]||(e[4]=t("div",{style:{height:"50px"}},null,-1)),t("div",I,[v(o,{value:L.value.isCheckAll,theme:"pink",onCallBack:U},{default:p(()=>e[3]||(e[3]=[t("div",{class:"check-all-text"},"全选",-1)])),_:1},8,["value"]),t("div",ee,"￥"+m(L.value.price),1)])])}}});const ae=D(se,[["__scopeId","data-v-cdb94816"]]);export{ae as default};
